<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consumer Choice & Optimization: Lesson & Quiz</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Crimson+Text:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Text', serif;
            background: linear-gradient(135deg, #fafafa 0%, #f0f0f0 100%);
            color: #1a1a1a;
            min-height: 100vh;
            padding: 25px;
            letter-spacing: 0.3px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            border-radius: 4px;
            overflow: hidden;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
        }

        .header {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            padding: 75px 55px;
            text-align: center;
            animation: slideDown 0.8s ease-out;
            border-bottom: 1px solid #ddd;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 3.2em;
            color: white;
            margin-bottom: 12px;
            letter-spacing: -0.8px;
            font-weight: 700;
        }

        .subtitle {
            font-size: 1.2em;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .tabs {
            display: flex;
            background: #f9f9f9;
            border-bottom: 1px solid #e0e0e0;
        }

        .tab-btn {
            flex: 1;
            padding: 22px 30px;
            background: none;
            border: none;
            color: #666;
            font-size: 1.05em;
            font-family: 'Crimson Text', serif;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            letter-spacing: 0.4px;
        }

        .tab-btn:hover {
            color: #1a1a1a;
            background: #f0f0f0;
        }

        .tab-btn.active {
            color: #1a1a1a;
            background: white;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background: #1a1a1a;
        }

        .content {
            padding: 55px 50px;
            min-height: 700px;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* LESSON STYLES */
        .lesson-section {
            margin-bottom: 50px;
            padding-bottom: 40px;
            border-bottom: 1px solid #e8e8e8;
        }

        .lesson-section:last-child {
            border-bottom: none;
        }

        h2 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.1em;
            margin-bottom: 22px;
            color: #1a1a1a;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.45em;
            margin: 28px 0 16px 0;
            color: #2d2d2d;
            font-weight: 600;
            letter-spacing: -0.3px;
        }

        .concept-box {
            background: #fafafa;
            border-left: 3px solid #1a1a1a;
            padding: 24px 28px;
            margin: 22px 0;
            border-radius: 0;
            line-height: 1.85;
            font-size: 1.02em;
        }

        .concept-box strong {
            color: #1a1a1a;
            font-weight: 600;
        }

        .concept-box.secondary {
            border-left-color: #555;
            background: #f5f5f5;
        }

        ul, ol {
            margin-left: 32px;
            line-height: 2;
        }

        li {
            margin-bottom: 16px;
            font-size: 1.02em;
        }

        .math-formula {
            background: #fafafa;
            padding: 28px;
            margin: 26px 0;
            border-left: 3px solid #1a1a1a;
            font-family: 'Crimson Text', serif;
            color: #1a1a1a;
            text-align: center;
            font-size: 1.1em;
            line-height: 1.8;
        }

        .table-wrapper {
            overflow-x: auto;
            margin: 28px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 18px 0;
            background: white;
            border: 1px solid #ddd;
        }

        th {
            background: #1a1a1a;
            color: white;
            padding: 16px;
            text-align: left;
            font-weight: 600;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.08em;
            letter-spacing: 0.3px;
        }

        td {
            padding: 15px 16px;
            border-bottom: 1px solid #e8e8e8;
            font-size: 1.01em;
        }

        tr:hover {
            background: #fafafa;
        }

        p {
            margin: 18px 0;
            line-height: 1.9;
            font-size: 1.02em;
        }

        /* QUIZ STYLES */
        .quiz-container {
            display: none;
        }

        .quiz-container.active {
            display: block;
        }

        .quiz-progress {
            background: #fafafa;
            padding: 26px;
            border: 1px solid #ddd;
            margin-bottom: 32px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .progress-bar {
            width: 68%;
            height: 6px;
            background: #e0e0e0;
            border-radius: 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: #1a1a1a;
            transition: width 0.4s ease;
            border-radius: 0;
        }

        .progress-text {
            color: #1a1a1a;
            font-weight: 600;
            margin-top: 10px;
            font-size: 0.98em;
            letter-spacing: 0.2px;
        }

        .question-card {
            background: white;
            border: 1px solid #ddd;
            padding: 36px;
            border-radius: 0;
            margin-bottom: 32px;
            transition: all 0.3s ease;
        }

        .question-card:hover {
            border-color: #1a1a1a;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .question-number {
            color: #666;
            font-size: 0.92em;
            font-weight: 600;
            margin-bottom: 14px;
            letter-spacing: 1.2px;
            text-transform: uppercase;
        }

        .question-text {
            font-size: 1.3em;
            margin-bottom: 28px;
            font-weight: 600;
            color: #1a1a1a;
            line-height: 1.65;
        }

        .option {
            display: flex;
            align-items: flex-start;
            padding: 18px 20px;
            margin-bottom: 14px;
            border: 1px solid #ddd;
            border-radius: 0;
            cursor: pointer;
            transition: all 0.25s ease;
        }

        .option:hover {
            background: #fafafa;
            border-color: #1a1a1a;
        }

        .option input[type="radio"] {
            margin-right: 18px;
            margin-top: 4px;
            cursor: pointer;
            accent-color: #1a1a1a;
            width: 20px;
            height: 20px;
            flex-shrink: 0;
        }

        .option label {
            cursor: pointer;
            flex: 1;
            font-size: 1.01em;
            line-height: 1.6;
        }

        .option.selected {
            background: #f5f5f5;
            border-color: #1a1a1a;
        }

        .option.correct {
            background: #f0f8f0;
            border-color: #4caf50;
            animation: pulse 0.5s ease;
        }

        .option.incorrect {
            background: #fef5f5;
            border-color: #d32f2f;
            animation: shake 0.3s ease;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.01); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-3px); }
            75% { transform: translateX(3px); }
        }

        .feedback {
            display: none;
            padding: 18px 20px;
            border-radius: 0;
            margin-top: 16px;
            font-weight: 600;
            font-size: 0.97em;
            border-left: 3px solid;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #f0f8f0;
            color: #2e7d32;
            border-left-color: #4caf50;
        }

        .feedback.incorrect {
            background: #fef5f5;
            color: #c62828;
            border-left-color: #d32f2f;
        }

        .buttons {
            display: flex;
            gap: 18px;
            margin-top: 44px;
            justify-content: center;
        }

        button.submit-btn, button.reset-btn {
            padding: 18px 48px;
            font-size: 1.08em;
            border: none;
            border-radius: 0;
            cursor: pointer;
            font-family: 'Crimson Text', serif;
            font-weight: 600;
            transition: all 0.3s ease;
            letter-spacing: 0.4px;
        }

        .submit-btn {
            background: #1a1a1a;
            color: white;
        }

        .submit-btn:hover:not(:disabled) {
            background: #0a0a0a;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .reset-btn {
            background: white;
            color: #1a1a1a;
            border: 2px solid #1a1a1a;
        }

        .reset-btn:hover {
            background: #f9f9f9;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .quiz-summary {
            display: none;
            background: #fafafa;
            padding: 50px;
            border-radius: 0;
            text-align: center;
            margin-bottom: 32px;
            border: 1px solid #ddd;
        }

        .quiz-summary.show {
            display: block;
            animation: slideDown 0.5s ease-out;
        }

        .summary-score {
            font-family: 'Cormorant Garamond', serif;
            font-size: 4em;
            color: #1a1a1a;
            margin-bottom: 18px;
            font-weight: 700;
        }

        .summary-text {
            font-size: 1.22em;
            margin-bottom: 30px;
            line-height: 1.8;
            color: #2d2d2d;
        }

        .summary-breakdown {
            display: flex;
            gap: 50px;
            justify-content: center;
            margin-top: 32px;
            font-size: 1.08em;
        }

        .breakdown-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .breakdown-number {
            font-size: 2.5em;
            font-weight: 700;
            color: #1a1a1a;
            margin-bottom: 10px;
            font-family: 'Cormorant Garamond', serif;
        }

        .breakdown-label {
            color: #666;
            font-size: 0.98em;
            font-weight: 600;
            letter-spacing: 0.3px;
        }

        .correct .breakdown-number {
            color: #2e7d32;
        }

        .incorrect .breakdown-number {
            color: #c62828;
        }

        .empty-state {
            text-align: center;
            padding: 80px 40px;
            color: #666;
        }

        .empty-state h3 {
            font-family: 'Cormorant Garamond', serif;
            font-size: 2.4em;
            margin-bottom: 22px;
            color: #1a1a1a;
            font-weight: 700;
        }

        .empty-state p {
            font-size: 1.12em;
            margin-bottom: 14px;
            line-height: 1.8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Consumer Choice & Optimization</h1>
            <p class="subtitle">Budget Constraints, Utility Maximization & Price/Income Effects</p>
        </div>

        <div class="tabs">
            <button class="tab-btn active" onclick="switchTab('lesson')">üìö Lesson Summary</button>
            <button class="tab-btn" onclick="switchTab('quiz')">‚úèÔ∏è Quiz</button>
        </div>

        <div class="content">
            <!-- LESSON TAB -->
            <div id="lesson" class="tab-content active">
                <div class="lesson-section">
                    <h2>Utility Maximization Principle</h2>
                    
                    <div class="concept-box">
                        <strong>Economists assume</strong> that when faced with choices, individuals select the option yielding the highest utility. People know their preferences and make consistent choices aligned with their utility preferences.
                    </div>

                    <h3>The Core Constraint</h3>
                    <div class="concept-box secondary">
                        People are constrained by the size of their incomes (budgets). Of all the choices they can afford, they choose the one maximizing utility.
                    </div>

                    <h3>The Optimization Principle</h3>
                    <p>To maximize utility given fixed income, an individual will:</p>
                    <ul>
                        <li>Buy goods and services that provide the highest satisfaction</li>
                        <li>Exhaust their total income (spend everything)</li>
                        <li>Ensure MRS equals the market rate of trade-off (price ratio)</li>
                    </ul>
                </div>

                <div class="lesson-section">
                    <h2>The Budget Constraint</h2>
                    
                    <div class="concept-box">
                        The <strong>budget constraint</strong> represents the maximum amount of goods consumers can purchase given their income and commodity prices. It forms the boundary between feasible and infeasible consumption choices.
                    </div>

                    <h3>Mathematical Form</h3>
                    <div class="math-formula">
                        I = p<sub>x</sub>x + p<sub>y</sub>y
                    </div>
                    <p style="margin-top: 0;">Where I = income, p<sub>x</sub> and p<sub>y</sub> = prices, x and y = quantities</p>

                    <p>Rearranging to solve for y:</p>
                    <div class="math-formula">
                        y = I/p<sub>y</sub> ‚àí (p<sub>x</sub>/p<sub>y</sub>)x
                    </div>

                    <h3>Budget Line Properties</h3>
                    <ul>
                        <li><strong>Y-intercept:</strong> I/p<sub>y</sub> = maximum y if all income spent on y</li>
                        <li><strong>X-intercept:</strong> I/p<sub>x</sub> = maximum x if all income spent on x</li>
                        <li><strong>Slope:</strong> ‚àíp<sub>x</sub>/p<sub>y</sub> (market rate of trade-off)</li>
                    </ul>

                    <h3>Interpretation of Slope</h3>
                    <div class="concept-box">
                        The slope <strong>‚àíp<sub>x</sub>/p<sub>y</sub></strong> represents the opportunity cost: how much y must be sacrificed to obtain one more unit of x. The more expensive y is relative to x, the flatter the budget line.
                    </div>

                    <h3>Budget Line Movements</h3>
                    <ul>
                        <li><strong>Parallel shifts:</strong> Changes in income (I) while prices remain constant</li>
                        <li><strong>Rotations:</strong> Changes in relative prices (p<sub>x</sub> or p<sub>y</sub>) with income constant</li>
                    </ul>
                </div>

                <div class="lesson-section">
                    <h2>Utility Maximization Geometrically</h2>
                    
                    <div class="concept-box">
                        Utility is maximized at the point where the indifference curve is <strong>tangent</strong> to the budget line. This represents the best affordable bundle that achieves the highest utility.
                    </div>

                    <h3>The Tangency Condition</h3>
                    <div class="math-formula">
                        Slope of IC = Slope of Budget Line<br><br>
                        MRS<sub>xy</sub> = p<sub>x</sub>/p<sub>y</sub>
                    </div>

                    <h3>Alternative Formulations</h3>
                    <ul>
                        <li>MU<sub>x</sub>/MU<sub>y</sub> = p<sub>x</sub>/p<sub>y</sub></li>
                        <li>MU<sub>x</sub>/p<sub>x</sub> = MU<sub>y</sub>/p<sub>y</sub> (Equi-Marginal Principle)</li>
                    </ul>

                    <p>These conditions state that at the optimum, the ratio of marginal utilities equals the ratio of prices. The marginal utility per unit of expenditure must be equal across all goods.</p>
                </div>

                <div class="lesson-section">
                    <h2>Example: Utility Maximization</h2>
                    
                    <p><strong>Given:</strong> U = xy; I = 200; p<sub>x</sub> = 5; p<sub>y</sub> = 10</p>

                    <h3>Step 1: Apply Tangency Condition</h3>
                    <ul>
                        <li>MU<sub>x</sub> = ‚àÇU/‚àÇx = y</li>
                        <li>MU<sub>y</sub> = ‚àÇU/‚àÇy = x</li>
                        <li>MRS<sub>xy</sub> = y/x = p<sub>x</sub>/p<sub>y</sub> = 5/10 = 1/2</li>
                        <li>Therefore: y/x = 1/2, or y = x/2</li>
                    </ul>

                    <h3>Step 2: Substitute into Budget Constraint</h3>
                    <div class="math-formula">
                        200 = 5x + 10(x/2)<br>
                        200 = 5x + 5x = 10x<br>
                        x* = 20
                    </div>

                    <h3>Step 3: Solve for y*</h3>
                    <div class="math-formula">
                        y* = x*/2 = 20/2 = 10
                    </div>

                    <h3>Result</h3>
                    <div class="concept-box secondary">
                        The optimal bundle is <strong>(x*, y*) = (20, 10)</strong> with maximum utility <strong>U* = 20 √ó 10 = 200</strong>
                    </div>
                </div>

                <div class="lesson-section">
                    <h2>The Lagrange Multiplier Method</h2>
                    
                    <div class="concept-box">
                        Constrained optimization problems can be solved using the <strong>Lagrangean Method</strong>, which transforms the constrained problem into an unconstrained one by introducing a multiplier Œª.
                    </div>

                    <h3>The Lagrange Equation</h3>
                    <div class="math-formula">
                        Z = U(x,y) + Œª(I ‚àí p<sub>x</sub>x ‚àí p<sub>y</sub>y)
                    </div>

                    <h3>First-Order Conditions (FOCs)</h3>
                    <div class="math-formula">
                        ‚àÇZ/‚àÇx = ‚àÇU/‚àÇx ‚àí Œªp<sub>x</sub> = 0<br>
                        ‚àÇZ/‚àÇy = ‚àÇU/‚àÇy ‚àí Œªp<sub>y</sub> = 0<br>
                        ‚àÇZ/‚àÇŒª = I ‚àí p<sub>x</sub>x ‚àí p<sub>y</sub>y = 0
                    </div>

                    <h3>Interpreting Œª (Lambda)</h3>
                    <div class="concept-box">
                        <strong>Œª</strong> represents the <strong>marginal utility of income</strong>‚Äîhow much additional utility the consumer gains from an extra unit of income. At the optimum: Œª = MU<sub>x</sub>/p<sub>x</sub> = MU<sub>y</sub>/p<sub>y</sub>
                    </div>
                </div>

                <div class="lesson-section">
                    <h2>Consumer Choice and Changes in Income</h2>
                    
                    <h3>Effect of Income Changes</h3>
                    <div class="concept-box">
                        When income rises, the budget constraint shifts <strong>parallel outward</strong>. Since relative prices don't change, the MRS remains constant at the optimum. Consumers move to a higher indifference curve on the same optimal ratio.
                    </div>

                    <h3>Normal Goods vs. Inferior Goods</h3>
                    
                    <p><strong>Normal Good:</strong> ‚àÇx/‚àÇI > 0</p>
                    <div class="concept-box">
                        Demand increases with income. Example: Qd<sub>x</sub> = 10 ‚àí ¬Ωp<sub>x</sub> + 2I, where ‚àÇQd<sub>x</sub>/‚àÇI = 2 (most goods are normal)
                    </div>

                    <p><strong>Inferior Good:</strong> ‚àÇx/‚àÇI < 0</p>
                    <div class="concept-box secondary">
                        Demand decreases with income. Example: Qd<sub>x</sub> = 5 ‚àí 2p<sub>x</sub> ‚àí I, where ‚àÇQd<sub>x</sub>/‚àÇI = ‚àí1 (generic goods, cheap alternatives)
                    </div>

                    <h3>Income Consumption Curve (ICC)</h3>
                    <div class="concept-box">
                        The <strong>ICC</strong> traces the locus of optimal bundles as income varies while prices remain constant. It is upward-sloping when both goods are normal, and downward-sloping when one good is inferior.
                    </div>

                    <h3>Engel Curve</h3>
                    <div class="concept-box secondary">
                        An <strong>Engel Curve</strong> shows the optimal quantity of a good at various income levels (ceteris paribus). For normal goods it slopes upward; for inferior goods it slopes downward.
                    </div>
                </div>

                <div class="lesson-section">
                    <h2>Consumer Choice and Changes in Prices</h2>
                    
                    <h3>Effect of Price Changes</h3>
                    <div class="concept-box">
                        A change in the price of one good alters the slope of the budget line (‚àíp<sub>x</sub>/p<sub>y</sub>), causing rotation about the intercept of the unchanged price. This changes the MRS at the optimal choice.
                    </div>

                    <h3>Price Change Example</h3>
                    <p><strong>Original:</strong> I = 200; p<sub>x</sub> = 5; p<sub>y</sub> = 10; (x*, y*) = (20, 10)</p>
                    <p><strong>New scenario:</strong> Price of x increases to p<sub>x</sub> = 10</p>

                    <ul>
                        <li>New slope: ‚àí(10/10) = ‚àí1</li>
                        <li>New MRS condition: y/x = 1, so y = x</li>
                        <li>New budget line: 200 = 10x + 10y</li>
                        <li>Substituting y = x: 200 = 20x, so x* = 10, y* = 10</li>
                        <li>New utility: U* = 100 (decreased from 200)</li>
                    </ul>

                    <h3>Substitution and Income Effects</h3>
                    <div class="concept-box">
                        When price changes, two effects occur simultaneously:
                        <ul style="margin-top: 12px; margin-left: 0;">
                            <li><strong>Substitution Effect:</strong> Goods become relatively more/less expensive, causing consumers to substitute toward cheaper alternatives while maintaining utility</li>
                            <li><strong>Income Effect:</strong> The price change alters purchasing power, affecting the quantity demanded due to real income change</li>
                        </ul>
                    </div>
                </div>

                <div class="lesson-section">
                    <h2>Key Takeaways</h2>
                    
                    <ul>
                        <li>Consumers maximize utility subject to budget constraints by ensuring MRS equals the price ratio</li>
                        <li>The budget constraint is the boundary of feasible consumption choices</li>
                        <li>Budget line slope reflects opportunity cost and market exchange rates</li>
                        <li>Income changes shift the budget line parallel; price changes rotate it</li>
                        <li>Normal goods: demand increases with income; inferior goods: demand decreases with income</li>
                        <li>The Lagrange multiplier (Œª) measures marginal utility of income</li>
                        <li>Price changes trigger both substitution and income effects on optimal choice</li>
                        <li>Equi-marginal principle: MU<sub>x</sub>/p<sub>x</sub> = MU<sub>y</sub>/p<sub>y</sub> at optimum</li>
                    </ul>
                </div>
            </div>

            <!-- QUIZ TAB -->
            <div id="quiz" class="tab-content">
                <div id="quizStart" class="empty-state">
                    <h3>Master Consumer Choice Theory</h3>
                    <p>Test your knowledge of utility maximization, budget constraints,</p>
                    <p>and the effects of price and income changes.</p>
                    <button class="submit-btn" style="margin-top: 35px;" onclick="startQuiz()">Start 10-Question Quiz</button>
                </div>

                <div id="quizContainer" class="quiz-container">
                    <div class="quiz-progress">
                        <div>
                            <div class="progress-bar">
                                <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="progress-text">Question <span id="currentQuestion">1</span> of 10</div>
                        </div>
                    </div>

                    <div id="questionsDisplay"></div>

                    <div class="buttons">
                        <button class="submit-btn" onclick="submitQuiz()">Submit Quiz</button>
                        <button class="reset-btn" onclick="resetQuiz()">Reset Quiz</button>
                    </div>
                </div>

                <div id="quizSummary" class="quiz-summary"></div>
            </div>
        </div>
    </div>

    <script>
        // Question Bank (50+ questions)
        const questionBank = [
            {
                question: "According to the utility maximization principle, what should a rational consumer do?",
                options: [
                    "Choose the bundle that provides highest satisfaction within budget",
                    "Buy the cheapest goods available",
                    "Spend as little as possible",
                    "Maximize quantity of goods purchased"
                ],
                correct: 0
            },
            {
                question: "What is the budget constraint in a two-good economy?",
                options: [
                    "U(x,y) = constant",
                    "I = p_x¬∑x + p_y¬∑y",
                    "MRS = p_x/p_y",
                    "Total utility is maximized"
                ],
                correct: 1
            },
            {
                question: "The slope of the budget line represents:",
                options: [
                    "The consumer's marginal rate of substitution",
                    "The opportunity cost and market exchange rate",
                    "The utility function",
                    "The indifference curve slope"
                ],
                correct: 1
            },
            {
                question: "In the budget line equation I = p_x¬∑x + p_y¬∑y, what does I represent?",
                options: [
                    "Interest rate",
                    "Consumer income",
                    "Indifference level",
                    "Price index"
                ],
                correct: 1
            },
            {
                question: "When income increases while prices stay constant, how does the budget line move?",
                options: [
                    "Rotates counterclockwise",
                    "Rotates clockwise",
                    "Shifts parallel outward",
                    "Becomes steeper"
                ],
                correct: 2
            },
            {
                question: "When price of x increases while income stays constant, the budget line:",
                options: [
                    "Shifts left",
                    "Shifts right",
                    "Rotates about the y-intercept",
                    "Becomes parallel to y-axis"
                ],
                correct: 2
            },
            {
                question: "What is the condition for utility maximization at the tangency point?",
                options: [
                    "MRS_xy = p_x/p_y",
                    "MRS_xy = I/x",
                    "U(x,y) = maximum utility",
                    "p_x = p_y"
                ],
                correct: 0
            },
            {
                question: "The equi-marginal principle states that at optimum:",
                options: [
                    "MU_x = MU_y",
                    "MU_x/p_x = MU_y/p_y",
                    "p_x = p_y",
                    "x = y"
                ],
                correct: 1
            },
            {
                question: "Which formulation is equivalent to MRS_xy = p_x/p_y?",
                options: [
                    "MU_x/MU_y = p_y/p_x",
                    "MU_x/MU_y = p_x/p_y",
                    "MU_x¬∑MU_y = p_x¬∑p_y",
                    "MU_x + MU_y = p_x + p_y"
                ],
                correct: 1
            },
            {
                question: "In the budget line y = I/p_y - (p_x/p_y)x, what is the y-intercept?",
                options: [
                    "I/p_x",
                    "I/p_y",
                    "-p_x/p_y",
                    "p_x/p_y"
                ],
                correct: 1
            },
            {
                question: "What does it mean if consumption of a good increases when income rises?",
                options: [
                    "It's a normal good",
                    "It's an inferior good",
                    "It's a Giffen good",
                    "It's a Veblen good"
                ],
                correct: 0
            },
            {
                question: "An inferior good is characterized by:",
                options: [
                    "‚àÇx/‚àÇI > 0",
                    "‚àÇx/‚àÇI < 0",
                    "‚àÇx/‚àÇp = 0",
                    "Constant elasticity"
                ],
                correct: 1
            },
            {
                question: "If Qd_x = 10 - ¬Ωp_x + 2I, what is the income elasticity?",
                options: [
                    "Positive (normal good)",
                    "Negative (inferior good)",
                    "Zero (independent of income)",
                    "Undefined"
                ],
                correct: 0
            },
            {
                question: "The Income Consumption Curve (ICC) traces:",
                options: [
                    "Points where MRS = p_x/p_y as income changes",
                    "How consumption changes with prices",
                    "The budget constraint",
                    "The utility function"
                ],
                correct: 0
            },
            {
                question: "An Engel Curve is upward sloping for:",
                options: [
                    "Inferior goods",
                    "Normal goods",
                    "All goods",
                    "Giffen goods"
                ],
                correct: 1
            },
            {
                question: "Given U = xy, I = 200, p_x = 5, p_y = 10, what is the optimal x*?",
                options: [
                    "10",
                    "20",
                    "30",
                    "40"
                ],
                correct: 1
            },
            {
                question: "In the same example, what is the optimal y*?",
                options: [
                    "5",
                    "10",
                    "15",
                    "20"
                ],
                correct: 1
            },
            {
                question: "What is the maximum utility U* in the example U = xy, I = 200, p_x = 5, p_y = 10?",
                options: [
                    "100",
                    "150",
                    "200",
                    "250"
                ],
                correct: 2
            },
            {
                question: "The Lagrange multiplier (Œª) in utility maximization represents:",
                options: [
                    "The total utility",
                    "The marginal utility of income",
                    "The budget constraint",
                    "The price ratio"
                ],
                correct: 1
            },
            {
                question: "In Lagrangean optimization, what does Œª equal at the optimum?",
                options: [
                    "MU_x/p_x = MU_y/p_y",
                    "MRS_xy",
                    "The price ratio",
                    "The income level"
                ],
                correct: 0
            },
            {
                question: "An indifference curve is tangent to the budget line. This means:",
                options: [
                    "Utility cannot be increased",
                    "The consumer is not at optimum",
                    "The MRS equals the price ratio",
                    "Both A and C are correct"
                ],
                correct: 3
            },
            {
                question: "If the price of x increases, what happens to the budget line?",
                options: [
                    "It becomes less steep",
                    "It becomes steeper",
                    "It shifts parallel",
                    "It doesn't change"
                ],
                correct: 1
            },
            {
                question: "When price of x increases and y's price stays constant, the x-intercept:",
                options: [
                    "Increases",
                    "Decreases",
                    "Stays the same",
                    "Becomes undefined"
                ],
                correct: 1
            },
            {
                question: "The substitution effect occurs when:",
                options: [
                    "Income changes",
                    "Preferences change",
                    "Relative prices change due to price adjustment",
                    "The consumer switches to a different good"
                ],
                correct: 2
            },
            {
                question: "The income effect refers to:",
                options: [
                    "Change in quantity due to relative price change",
                    "Change in purchasing power from price changes",
                    "Movement along the demand curve",
                    "Change in consumer income"
                ],
                correct: 1
            },
            {
                question: "For a normal good, when its price increases, the total effect is:",
                options: [
                    "Quantity demanded increases",
                    "Quantity demanded decreases",
                    "No change in quantity",
                    "Utility increases"
                ],
                correct: 1
            },
            {
                question: "In utility maximization, the point C represents:",
                options: [
                    "The most affordable point",
                    "The point on the highest indifference curve within budget",
                    "The highest possible utility",
                    "The point where x = y"
                ],
                correct: 1
            },
            {
                question: "What does it mean if a point is on the budget line but not optimal?",
                options: [
                    "All income is not spent",
                    "The consumer can achieve higher utility elsewhere on the budget line",
                    "The price ratio is violated",
                    "The consumer's preferences are irrational"
                ],
                correct: 1
            },
            {
                question: "The budget line constraint ensures that:",
                options: [
                    "Consumers always spend all their income",
                    "Only affordable bundles are considered",
                    "The MRS equals prices",
                    "Utility is maximized"
                ],
                correct: 1
            },
            {
                question: "For the utility function U = xy with I = 500, p_x = 5, p_y = 10, what is x*?",
                options: [
                    "25",
                    "50",
                    "75",
                    "100"
                ],
                correct: 1
            },
            {
                question: "In constrained optimization, second-order conditions ensure:",
                options: [
                    "A minimum is achieved",
                    "The constraint is satisfied",
                    "We have a maximum, not a minimum",
                    "The function is linear"
                ],
                correct: 2
            },
            {
                question: "If a consumer allocates income such that MU_x/p_x ‚â† MU_y/p_y, then:",
                options: [
                    "The consumer is at optimum",
                    "Utility can be increased by reallocating spending",
                    "The consumer prefers x to y",
                    "Income has increased"
                ],
                correct: 1
            },
            {
                question: "The n-good generalization of the optimality condition is:",
                options: [
                    "MU_1/p_1 = MU_2/p_2 = ... = MU_n/p_n",
                    "p_1 = p_2 = ... = p_n",
                    "x_1 = x_2 = ... = x_n",
                    "MU_1 = MU_2 = ... = MU_n"
                ],
                correct: 0
            },
            {
                question: "The slope of the budget line -p_x/p_y shows:",
                options: [
                    "How many units of y are needed to buy one unit of x",
                    "How many units of y must be given up to get one more x",
                    "Both A and B are correct",
                    "The consumer's preference for x over y"
                ],
                correct: 2
            },
            {
                question: "If income doubles and prices remain constant, the optimal bundle:",
                options: [
                    "Stays the same",
                    "Doubles in quantity",
                    "Depends on whether goods are normal or inferior",
                    "Increases by 50%"
                ],
                correct: 2
            },
            {
                question: "For perfect complements U = min{x,y}, the optimal bundle satisfies:",
                options: [
                    "x = y",
                    "MRS = p_x/p_y",
                    "MU_x = MU_y",
                    "Both A and B"
                ],
                correct: 3
            },
            {
                question: "In the budget constraint, if x = 0, then y equals:",
                options: [
                    "0",
                    "I/p_y",
                    "I/p_x",
                    "p_x/p_y"
                ],
                correct: 1
            },
            {
                question: "The tangency condition MRS_xy = p_x/p_y graphically means:",
                options: [
                    "The IC and budget line are parallel",
                    "The IC and budget line intersect at a right angle",
                    "The IC and budget line touch at exactly one point",
                    "The IC is above the budget line"
                ],
                correct: 2
            },
            {
                question: "Point A on the budget constraint but inside the feasible region implies:",
                options: [
                    "All income is spent",
                    "Not all income is spent",
                    "The consumer is at optimum",
                    "Utility is zero"
                ],
                correct: 1
            },
            {
                question: "When solving U = xy subject to 200 = 5x + 10y using Lagrange, the first-order condition ‚àÇZ/‚àÇx = 0 gives:",
                options: [
                    "y - 5Œª = 0",
                    "x - 10Œª = 0",
                    "y = 5Œª",
                    "Both A and C"
                ],
                correct: 3
            },
            {
                question: "The ICC is downward sloping when:",
                options: [
                    "Both goods are normal",
                    "Both goods are inferior",
                    "One good is normal and one is inferior",
                    "Preferences change"
                ],
                correct: 2
            },
            {
                question: "A Giffen good is a special case where:",
                options: [
                    "Demand decreases when price increases",
                    "Demand increases when price increases",
                    "Income and substitution effects reinforce each other",
                    "The good is both normal and inferior"
                ],
                correct: 1
            },
            {
                question: "In utility maximization, the consumer spends all income because:",
                options: [
                    "Income must be allocated",
                    "More consumption always increases utility (non-satiation)",
                    "The budget constraint requires it",
                    "Prices are positive"
                ],
                correct: 1
            },
            {
                question: "When the price ratio p_x/p_y increases, the budget line becomes:",
                options: [
                    "Steeper",
                    "Flatter",
                    "Parallel",
                    "Horizontal"
                ],
                correct: 0
            },
            {
                question: "The equi-marginal principle suggests that at optimum:",
                options: [
                    "Marginal utilities are equal across all goods",
                    "Prices are equal across all goods",
                    "Marginal utility per peso is equal across all goods",
                    "Quantities purchased are equal"
                ],
                correct: 2
            },
            {
                question: "If a consumer's indifference curve at the budget tangency has a different slope than the budget line, then:",
                options: [
                    "The consumer is at the optimum",
                    "The consumer can improve by reallocating spending",
                    "The good is inferior",
                    "Income has changed"
                ],
                correct: 1
            },
            {
                question: "The practical advantage of the Lagrange multiplier method is that it:",
                options: [
                    "Graphically shows the solution",
                    "Converts constrained problem to unconstrained optimization",
                    "Always gives multiple solutions",
                    "Eliminates the need for substitution"
                ],
                correct: 1
            },
            {
                question: "At the optimal choice, if MU_x/p_x > MU_y/p_y, a rational consumer should:",
                options: [
                    "Buy more x and less y",
                    "Buy more y and less x",
                    "Keep spending allocation the same",
                    "Increase total spending"
                ],
                correct: 0
            },
            {
                question: "For a consumer at optimum with the utility function U = xy, what is the relationship between x and y?",
                options: [
                    "x = y always",
                    "x = 2y",
                    "x and y depend on the price ratio",
                    "y/x = p_x/p_y"
                ],
                correct: 2
            }
        ];

        let currentQuiz = [];
        let answers = {};
        let submitted = false;

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function switchTab(tab) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tab).classList.add('active');
            event.target.classList.add('active');
        }

        function startQuiz() {
            currentQuiz = shuffleArray([...questionBank]).slice(0, 10);
            answers = {};
            submitted = false;
            document.getElementById('quizStart').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('quizSummary').classList.remove('show');
            renderQuestions();
        }

        function renderQuestions() {
            const container = document.getElementById('questionsDisplay');
            container.innerHTML = '';
            
            currentQuiz.forEach((q, idx) => {
                const card = document.createElement('div');
                card.className = 'question-card';
                card.innerHTML = `
                    <div class="question-number">Question ${idx + 1}</div>
                    <div class="question-text">${q.question}</div>
                    <div id="options-${idx}"></div>
                    <div id="feedback-${idx}" class="feedback"></div>
                `;
                container.appendChild(card);

                const optionsContainer = document.getElementById(`options-${idx}`);
                q.options.forEach((opt, optIdx) => {
                    const option = document.createElement('label');
                    option.className = 'option';
                    option.innerHTML = `
                        <input type="radio" name="q${idx}" value="${optIdx}" onchange="selectOption(${idx}, ${optIdx})">
                        <span>${opt}</span>
                    `;
                    optionsContainer.appendChild(option);
                });
            });
        }

        function selectOption(qIdx, optIdx) {
            answers[qIdx] = optIdx;
            updateProgress();
            
            if (submitted) {
                checkAnswer(qIdx, optIdx);
            }
        }

        function updateProgress() {
            const answered = Object.keys(answers).length;
            const percent = (answered / 10) * 100;
            document.getElementById('progressFill').style.width = percent + '%';
        }

        function checkAnswer(qIdx, userAnswer) {
            const isCorrect = userAnswer === currentQuiz[qIdx].correct;
            const options = document.querySelectorAll(`#options-${qIdx} .option`);
            const feedback = document.getElementById(`feedback-${qIdx}`);
            
            options.forEach((opt, idx) => {
                opt.classList.remove('selected', 'correct', 'incorrect');
                const input = opt.querySelector('input');
                
                if (input.value == userAnswer) {
                    opt.classList.add(isCorrect ? 'correct' : 'incorrect');
                } else if (idx == currentQuiz[qIdx].correct && !isCorrect) {
                    opt.classList.add('correct');
                }
            });

            feedback.classList.add('show', isCorrect ? 'correct' : 'incorrect');
            feedback.innerHTML = isCorrect ? 
                '‚úì Correct!' : 
                '‚úó Incorrect. The correct answer is: ' + currentQuiz[qIdx].options[currentQuiz[qIdx].correct];
        }

        function submitQuiz() {
            submitted = true;
            let correct = 0;

            Object.keys(answers).forEach(qIdx => {
                if (answers[qIdx] === currentQuiz[qIdx].correct) {
                    correct++;
                }
                checkAnswer(parseInt(qIdx), answers[qIdx]);
            });

            document.getElementById('quizContainer').style.display = 'none';
            showSummary(correct);
        }

        function showSummary(correct) {
            const percent = Math.round((correct / 10) * 100);
            const summary = document.getElementById('quizSummary');
            summary.innerHTML = `
                <div class="summary-score">${percent}%</div>
                <div class="summary-text">
                    ${percent >= 80 ? "Excellent! You have mastered consumer choice and optimization theory." : 
                      percent >= 60 ? "Good effort! Review budget constraints and the Lagrange method for improvement." :
                      "Keep studying! Focus on utility maximization and the tangency condition."}
                </div>
                <div class="summary-breakdown">
                    <div class="breakdown-item correct">
                        <div class="breakdown-number">${correct}</div>
                        <div class="breakdown-label">Correct</div>
                    </div>
                    <div class="breakdown-item incorrect">
                        <div class="breakdown-number">${10 - correct}</div>
                        <div class="breakdown-label">Incorrect</div>
                    </div>
                </div>
                <button class="submit-btn" style="margin-top: 36px;" onclick="retakeQuiz()">Retake Quiz</button>
            `;
            summary.classList.add('show');
        }

        function resetQuiz() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('quizSummary').classList.remove('show');
            document.getElementById('quizStart').style.display = 'block';
            currentQuiz = [];
            answers = {};
            submitted = false;
        }

        function retakeQuiz() {
            document.getElementById('quizSummary').classList.remove('show');
            startQuiz();
        }
    </script>
</body>
</html>
